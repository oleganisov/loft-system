(window["webpackJsonploftschool-nodejs-project"]=window["webpackJsonploftschool-nodejs-project"]||[]).push([[0],{213:function(e,t,a){e.exports=a(355)},270:function(e,t){},355:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o,s,l,u,m,d=a(0),p=a.n(d),f=a(11),h=a.n(f),b=a(18),g=a(19),E=a(21),O=a(20),v=a(17),j=a(8),w=a(184),N=a.n(w),x=a(7),y=a(132),S=a(419),C=a(24),k=a(185),T=a.n(k),A=a(61),P=a(418),I=Object(P.a)({OPEN_NOTIFICATION:function(e){return e},CLOSE_NOTIFICATION:function(e){return e}},{prefix:"notifications"}),_=I.openNotification,R=I.closeNotification,D=function(e){return e.notifications},L=Object(S.a)((n={},Object(x.a)(n,_,(function(e,t){var a=t.payload,n=a.text,r=a.variant;return[].concat(Object(A.a)(e),[{text:n,variant:r,id:e.length+1,isActive:!e.length}])})),Object(x.a)(n,R,(function(e,t){var a=e.filter((function(e){return e.id!==t.payload}));return a.length?a.map((function(e,t){return t===a.length-1&&(e.isActive=!0),e})):a})),n),[]),U=L,F=T.a.create({baseURL:"https://loft-app.herokuapp.com/api/"}),H=[],W=!1,M=function(e){var t=e.url,a=e.method,n=e.data,r=e.headers,c=void 0===r?{}:r,i=e.isRefresh,o=e.isWithoutToken,s=e.getState,l=void 0===s?function(){return{}}:s,u=e.dispatch,m=void 0===u?function(){}:u;return new Promise((function(e,r){var s=z(l()),u=s.accessToken,d=s.accessTokenExpiredAt,p=s.refreshTokenExpiredAt,f=function(e){var t=e.url,a=e.method,n=e.headers,r=e.data,c=e.resolve,s=e.reject;if(!o){var u=z(l()),d=u.accessToken,p=u.refreshToken;n.Authorization=i?p:d}return F({url:t,method:a,headers:n,data:r}).then((function(e){c(e.data)})).catch((function(e){if(!e.response)return m(_({variant:"error",text:"Error!!\n".concat(e.message)})),s(e.message);var a=e.response.status||404,n=e.response.data;switch(console.group("Error from: "+t),console.info("Status: "+a),console.dir(n),console.groupEnd(),a){case 401:case 403:return m(ce()),s(n);case 500:case 502:case 503:return m(_({variant:"error",text:"".concat(a,"!\nSomething is wrong))")})),s({detail:"Unknown error"});default:return s(n)}}))},h=d<=Date.now(),b=p<=Date.now();u&&h&&!b&&!o?(!i&&H.push({url:t,method:a,data:n,headers:c,isRefresh:i,resolve:e,reject:r}),i||W?i&&f({url:t,method:a,data:n,headers:c,resolve:e,reject:r}):(W=!0,m(re()).then((function(){W=!1,H.forEach((function(e){return f(e)}))})).catch((function(){m(ce()),r({detail:"Refresh token error"})})))):b&&!o?(m(ce()),r({detail:"Refresh token is expired"})):f({url:t,method:a,data:n,headers:c,resolve:e,reject:r})}))},B=function(e){return e.auth.userProfile},G=function(e){return e.auth.permissions},z=function(e){return e.auth.tokens},q=function(e){return!!e.auth.tokens.accessToken},V=function(e){return e.auth.isLoadingUserProfile},X=(Object(y.a)("".concat("AUTH","/LOGIN_USER_REQUEST")),Object(y.a)("".concat("AUTH","/REGISTRATION_USER_REQUEST")),Object(y.a)("".concat("AUTH","/SET_PROFILE_DATA"))),J=Object(y.a)("".concat("AUTH","/SET_TOKEN_DATA")),Z=Object(y.a)("".concat("AUTH","/LOGOUT_USER")),Q=Object(y.a)("".concat("AUTH","/SET_IS_LOADING_USER_PROFILE")),Y=Object(S.a)(Object(x.a)({},Q,(function(e,t){return t.payload})),!1),K=Object(S.a)((r={},Object(x.a)(r,X,(function(e,t){var a=t.payload,n=a.id,r=a.image,c=a.middleName,i=a.surName,o=a.username;return{id:n,image:r,firstName:a.firstName,middleName:c,surName:i,username:o}})),Object(x.a)(r,Z,(function(){return null})),r),null),$={chat:{C:!1,D:!1,R:!1,U:!1},news:{C:!1,D:!1,R:!1,U:!1},settings:{C:!1,D:!1,R:!1,U:!1}},ee=Object(S.a)((c={},Object(x.a)(c,X,(function(e,t){return t.payload.permission})),Object(x.a)(c,Z,(function(){return $})),c),$),te=Object(S.a)((i={},Object(x.a)(i,J,(function(e,t){var a=t.payload;return{accessToken:a.accessToken,accessTokenExpiredAt:a.accessTokenExpiredAt,refreshToken:a.refreshToken,refreshTokenExpiredAt:a.refreshTokenExpiredAt}})),Object(x.a)(i,Z,(function(){return{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}})),i),{accessToken:null,accessTokenExpiredAt:null,refreshToken:null,refreshTokenExpiredAt:null}),ae=Object(C.c)({userProfile:K,permissions:ee,tokens:te,isLoadingUserProfile:Y}),ne=function(){return function(e,t){var a=localStorage.getItem("token-data");a&&(e(J(JSON.parse(a))),M({url:"/profile",method:"GET",dispatch:e,getState:t}).then((function(t){e(X(t))})).catch((function(e){})))}},re=function(){return function(e,t){return new Promise((function(a,n){M({url:"/refresh-token",method:"POST",isRefresh:!0,dispatch:e,getState:t}).then((function(t){e(J(t)),a(a)})).catch((function(e){return n(e)}))}))}},ce=function(){return function(e){localStorage.removeItem("token-data"),e(Z()),_({text:"\u0412\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",variant:"info"})}},ie=function(e){var t=e.firstName,a=e.surName,n=e.middleName,r=e.oldPassword,c=e.newPassword,i=e.avatar;return function(e,o){return new Promise((function(s){var l=new FormData;l.append("firstName",t),l.append("surName",a),l.append("middleName",n),l.append("oldPassword",r),l.append("newPassword",c),l.append("avatar",i),e(Q(!0)),M({url:"/profile",method:"PATCH",data:l,getState:o,dispatch:e}).then((function(t){e(X(t)),e(_({text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d!",variant:"success"})),s(!0)})).catch((function(t){return e(_({text:t.message,variant:"error"}))})).finally((function(){return e(Q(!1))}))}))}},oe="/",se="/registration",le="/news",ue="/chat",me="/profile",de="/admin-panel",pe=Object(j.b)((function(e){return{permissions:G(e),isAuthorized:q(e)}}))((function(e){var t=e.permissionPath,a=e.path,n=e.component,r=e.permissions;return!e.isAuthorized||t&&!N.a.get(r,[t,"R"],!1)?p.a.createElement(v.a,{from:a,to:oe}):p.a.createElement(v.b,{path:a,component:n})})),fe=a(14),he=a(4),be=a(417),ge=a(387),Ee=a(388),Oe=a(389),ve=a(27),je=a(356),we=p.a.forwardRef((function(e,t){return p.a.createElement(ve.b,Object.assign({innerRef:t},e))})),Ne=Object(v.g)((function(e){var t=e.path,a=e.location,n=e.children,r=e.isRouterLink,c=e.color,i=void 0===c?"primary":c;return p.a.createElement(je.a,{color:r?a.pathname===t?i:"default":i,component:we,to:t},n)})),xe=a(30),ye=a.n(xe),Se=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"renderAuthorizedNav",value:function(){var e=this.props,t=e.permissions,a=e.profile;return p.a.createElement(p.a.Fragment,null,ye()(t,"news.R",!1)&&p.a.createElement(Ne,{path:le,isRouterLink:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),ye()(t,"chat.R",!1)&&p.a.createElement(Ne,{path:ue,isRouterLink:!0},"\u0427\u0430\u0442"),ye()(t,"settings.R",!1)&&p.a.createElement(Ne,{path:de,isRouterLink:!0},"\u0410\u0434\u043c\u0438\u043d\u043a\u0430"),p.a.createElement(Ne,{path:me,isRouterLink:!0},a?a.username:""))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return p.a.createElement("div",null,p.a.createElement(ge.a,{position:"static",color:"default",className:t.appBar},p.a.createElement(Ee.a,null,p.a.createElement(Oe.a,null,p.a.createElement("div",{className:t.logo},p.a.createElement("img",{src:"../../assets/img/logo.png",alt:"logo"})),p.a.createElement(Ne,{path:oe,isRouterLink:!0},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),a?this.renderAuthorizedNav():null))))}}]),a}(d.PureComponent),Ce=Object(fe.a)(Object(he.a)((function(){return{logo:{flexGrow:1}}})),Object(j.b)((function(e){return{isAuthorized:q(e),permissions:G(e),profile:B(e)}})))(Se),ke=a(44),Te=a(36),Ae=a(68),Pe=a(135),Ie=a(390),_e=a(422),Re=a(391),De=a(392),Le=a(393),Ue=Object(he.a)((function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}}))((function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,c=e.label,i=e.required;return p.a.createElement(Ie.a,{className:a.textField,required:i},p.a.createElement(_e.a,{htmlFor:"input-"+t},c),p.a.createElement(Re.a,{id:"input-"+t,type:"text",value:r,autoComplete:t,onChange:n,startAdornment:p.a.createElement(De.a,{position:"start"},p.a.createElement(Le.a,null))}))})),Fe=a(395),He=a(394),We=a(396),Me=a(397),Be=a(48),Ge=a.n(Be),ze=Object(he.a)((function(e){return{textField:{display:200,marginBottom:e.spacing(3)}}}))((function(e){var t=e.id,a=e.classes,n=e.handleChange,r=e.value,c=e.label,i=e.className,o=e.name,s=p.a.useState({showPassword:!1}),l=Object(Ae.a)(s,2),u=l[0],m=l[1];return p.a.createElement(Ie.a,{className:Ge()(a.textField,i),required:!0},p.a.createElement(_e.a,{htmlFor:t},c),p.a.createElement(Re.a,{id:t,autoComplete:t,type:u.showPassword?"text":"password",name:o,value:r,onChange:n,startAdornment:p.a.createElement(De.a,{position:"start"},p.a.createElement(He.a,null)),endAdornment:p.a.createElement(De.a,{position:"end"},p.a.createElement(Fe.a,{"aria-label":"toggle password visibility",onClick:function(){m({showPassword:!u.showPassword})},onMouseDown:function(e){e.preventDefault()}},u.showPassword?p.a.createElement(We.a,null):p.a.createElement(Me.a,null)))}))})),qe=Object(fe.a)(Object(he.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}})),Object(j.b)())((function(e){var t=e.classes,a=e.dispatch,n=Object(d.useState)({username:"",password:""}),r=Object(Ae.a)(n,2),c=r[0],i=r[1],o=function(e){return function(t){i(Object(Te.a)(Object(Te.a)({},c),{},Object(x.a)({},e,t.target.value)))}};return p.a.createElement(p.a.Fragment,null,p.a.createElement(Pe.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=c.username,n=c.password;a(function(e){var t=e.username,a=e.password;return function(e,n){return new Promise((function(r,c){M({url:"/login",method:"POST",data:{username:t,password:a},isWithoutToken:!0,dispatch:e,getState:n}).then((function(t){e(_({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438!",variant:"success"}));var a=t.accessToken,n=t.accessTokenExpiredAt,c=t.refreshToken,i=t.refreshTokenExpiredAt;localStorage.setItem("token-data",JSON.stringify({accessToken:a,accessTokenExpiredAt:n,refreshToken:c,refreshTokenExpiredAt:i})),e(X(t)),e(J(t)),r(t)})).catch((function(t){e(_({text:t.message,variant:"error"})),c(t)}))}))}}({username:t,password:n}))}},p.a.createElement(Ue,{handleChange:o("username"),value:c.username,id:"username",label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),p.a.createElement(ze,{handleChange:o("password"),value:c.password,id:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(je.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u043e\u0439\u0442\u0438")),p.a.createElement(ke.a,{className:Ge()(t.textCenter,t.form)},"\u0412\u043f\u0435\u0440\u0432\u044b\u0435 \u043d\u0430 \u0441\u0430\u0439\u0442\u0435? ",p.a.createElement(ve.b,{to:se},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))})),Ve=Object(fe.a)(Object(he.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"},textCenter:{textAlign:"center"}}})),Object(j.b)(),v.g)((function(e){var t=e.classes,a=e.dispatch,n=e.history,r=Object(d.useState)({username:"",password:"",repeatPassword:"",firstname:"",lastname:"",patronicname:""}),c=Object(Ae.a)(r,2),i=c[0],o=c[1],s=function(e){return function(t){o(Object(Te.a)(Object(Te.a)({},i),{},Object(x.a)({},e,t.target.value)))}};return p.a.createElement(p.a.Fragment,null,p.a.createElement(Pe.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault();var t=i.username,r=i.password,c=i.firstname,o=i.lastname,s=i.patronicname;a(function(e){var t=e.username,a=e.password,n=e.firstname,r=e.lastname,c=e.patronicname;return function(e,i){return new Promise((function(o,s){var l={username:t,surName:r,firstName:n,middleName:c,password:a};M({url:"/registration",data:l,method:"POST",isWithoutToken:!0,dispatch:e,getState:i}).then((function(){e(_({text:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b!",variant:"success"})),o(l)})).catch((function(t){e(_({text:t.message,variant:"error"})),s(t)}))}))}}({username:t,password:r,firstname:c,lastname:o,patronicname:s})).then((function(){return n.push(oe)})).catch(console.error)}},p.a.createElement(Ue,{id:"username",handleChange:s("username"),value:i.username,label:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0}),p.a.createElement(Ue,{id:"lastname",handleChange:s("lastname"),value:i.lastname,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}),p.a.createElement(Ue,{id:"firstname",handleChange:s("firstname"),value:i.firstname,label:"\u0418\u043c\u044f"}),p.a.createElement(Ue,{id:"patronicname",handleChange:s("patronicname"),value:i.patronicname,label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"}),p.a.createElement(ze,{id:"password",handleChange:s("password"),value:i.password,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(ze,{id:"repeatPassword",handleChange:s("repeatPassword"),value:i.repeatPassword,label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}),p.a.createElement(je.a,{color:"primary",variant:"contained",type:"submit"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),p.a.createElement(ke.a,{className:Ge()(t.textCenter,t.form)},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",p.a.createElement(ve.b,{to:oe},"\u0412\u043e\u0439\u0442\u0438")))})),Xe=Object(fe.a)(Object(he.a)((function(){return{form:{display:"flex",flexDirection:"column",padding:"20px 40px",maxWidth:"300px"}}})),Object(j.b)())((function(e){var t=e.classes,a=e.dispatch;return p.a.createElement(Pe.a,{className:t.form,component:"form",onSubmit:function(e){e.preventDefault(),a(ce())}},p.a.createElement(je.a,{color:"primary",variant:"contained",type:"submit"},"\u0412\u044b\u0439\u0442\u0438"))})),Je=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isAuthorized;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(Ee.a,null,p.a.createElement(ke.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u0412\u0430\u0448\u0435 \u0443\u044e\u0442\u043d\u043e\u0435",p.a.createElement("br",null),"\u0440\u0430\u0431\u043e\u0447\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e"),a?p.a.createElement(Xe,null):p.a.createElement(p.a.Fragment,null,p.a.createElement(v.b,{path:"/",exact:!0,component:qe}),p.a.createElement(v.b,{path:"/registration",component:Ve}))))}}]),a}(d.PureComponent),Ze=Object(fe.a)(Object(he.a)((function(){return{wrapper:{background:'url("/assets/img/background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",paddingTop:"40px"}}})),Object(j.b)((function(e){return{isAuthorized:q(e)}})),v.g)(Je),Qe=a(357),Ye=function(e){return e.news.isLoadingNewsList},Ke=function(e){return e.news.isLoadingNewsForm},$e=function(e){return e.news.isLoaded},et=function(e){return e.news.news},tt=Object(y.a)("".concat("NEWS","/SET_IS_LOADING_NEWS_LIST")),at=Object(y.a)("".concat("NEWS","/SET_IS_LOADING_NEWS_FORM")),nt=Object(y.a)("".concat("NEWS","/SET_NEWS_LIST")),rt=Object(y.a)("".concat("NEWS","/APPEND_NEWS")),ct=Object(y.a)("".concat("NEWS","/SET_TO_ZERO_NEWS_LIST")),it=(Object(y.a)("".concat("NEWS","/SET_IS_LOADED")),Object(S.a)(Object(x.a)({},tt,(function(e,t){return t.payload})),!1)),ot=Object(S.a)(Object(x.a)({},at,(function(e,t){return t.payload})),!1),st=Object(S.a)(Object(x.a)({},nt,(function(e,t){return!0})),!1),lt=Object(S.a)((o={},Object(x.a)(o,nt,(function(e,t){return t.payload})),Object(x.a)(o,rt,(function(e,t){return[t.payload].concat(Object(A.a)(e))})),Object(x.a)(o,ct,(function(){return[]})),o),[]),ut=Object(C.c)({isLoadingNewsList:it,isLoadingNewsForm:ot,isLoaded:st,news:lt}),mt=function(e){var t=e.title,a=e.text;return function(e,n){return new Promise((function(r,c){var i={title:t,text:a};e(at(!0)),M({url:"/news",method:"POST",data:i,getState:n,dispatch:e}).then((function(t){e(nt(t)),r(t)})).catch((function(e){c(e)})).finally((function(){return e(at(!1))}))}))}},dt=function(e){var t=e.id,a=e.title,n=e.text;return function(e,r){return new Promise((function(c,i){var o={title:a,text:n};e(at(!0)),M({url:"/news/".concat(t),method:"PATCH",data:o,getState:r,dispatch:e}).then((function(t){e(nt(t)),c(t)})).catch((function(e){i(e)})).finally((function(){return e(at(!1))}))}))}},pt=a(398),ft=a(399),ht=a(423),bt=a(400),gt=a(401),Et=function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},card:{marginBottom:e.spacing(2)}}},Ot=Object(Qe.a)(Et)((function(e){var t=e.classes,a=e.post,n=e.dispatch,r=e.permission,c=!!ye()(r,"news.U",!1),i=!!ye()(r,"news.D",!1);return p.a.createElement(pt.a,{className:t.card},p.a.createElement(ft.a,{avatar:p.a.createElement(ht.a,{"aria-label":"recipe",src:a.user.image||"/assets/img/no-user-image.png",alt:a.user.username}),title:a.title,subheader:a.created_at}),p.a.createElement(bt.a,null,p.a.createElement(ke.a,{variant:"body2",color:"textSecondary",component:"p"},a.text)),p.a.createElement(gt.a,null,c&&p.a.createElement(Ne,{path:"/news/".concat(a.id,"/edit")},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),i&&p.a.createElement(je.a,{onClick:function(){n(function(e){var t=e.id;return function(e,a){return new Promise((function(n,r){e(tt(!0)),M({url:"/news/".concat(t),method:"DELETE",getState:a,dispatch:e}).then((function(t){e(nt(t)),n(t)})).catch((function(e){r(e)})).finally((function(){return e(tt(!1))}))}))}}({id:a.id}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})),vt=Object(fe.a)(Object(Qe.a)(Et),Object(j.b)((function(e){return{permission:G(e)}})))(Ot),jt=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){$e(t())||(e(tt(!0)),M({url:"/news",method:"GET",getState:t,dispatch:e}).then((function(t){return e(nt(t))})).catch((function(e){return console.log(e)})).finally((function(){return e(tt(!1))})))}))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.isLoaded,n=e.news,r=e.permission,c=!!ye()(r,"news.C",!1);return p.a.createElement(p.a.Fragment,null,c&&p.a.createElement(Ne,{color:"primary",path:"".concat(le,"/add")},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),p.a.createElement("div",null,t?p.a.createElement("div",null,"Loading..."):null,a?n.length?n.map((function(e){return p.a.createElement(vt,{post:e,key:e.id})})):p.a.createElement("div",null,"\u041d\u0435\u0442 \u043d\u043e\u0432\u043e\u0441\u0442\u0435\u0439"):null))}}]),a}(d.PureComponent),wt=Object(j.b)((function(e){return{isLoading:Ye(e),isLoaded:$e(e),news:et(e),permission:G(e)}}),null)(jt),Nt=a(402),xt=a(424),yt=a(405),St=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:"",text:"",createdAt:new Date,user:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(x.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.title,r=a.text,c=e.props,i=c.history,o=c.dispatch,s=c.match;o(s.params.id?dt({title:n,text:r,id:s.params.id}):mt({title:n,text:r})).then((function(){return i.push(le)}))},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.newsList;if(t.params.id){var n=a.find((function(e){return e.id===t.params.id})),r=n.title,c=n.text,i=n.created_at,o=n.user;this.setState({title:r,text:c,createdAt:i,user:o.username})}}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.title,n=t.text,r=t.createdAt,c=t.user;return p.a.createElement(Pe.a,{className:e.formCard,component:"form",onSubmit:this.handleSubmit},p.a.createElement(Nt.a,{container:!0,spacing:2},p.a.createElement(Nt.a,{item:!0,xs:4},p.a.createElement(xt.a,{label:"\u0410\u0432\u0442\u043e\u0440",value:c,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),p.a.createElement(xt.a,{label:"\u0414\u0430\u0442\u0430",value:r,onChange:this.handleChange,className:e.textField,margin:"normal",disabled:!0,fullWidth:!0}),p.a.createElement(xt.a,{label:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",name:"title",value:a,onChange:this.handleChange,className:e.textField,margin:"normal",fullWidth:!0})),p.a.createElement(Nt.a,{item:!0,xs:8},p.a.createElement(xt.a,{label:"\u0422\u0435\u043a\u0441\u0442",name:"text",value:n,onChange:this.handleChange,className:e.textField,margin:"normal",multiline:!0,fullWidth:!0,rows:5}),p.a.createElement(yt.a,null,p.a.createElement(je.a,{variant:"contained",color:"secondary",type:"submit"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(Ne,{path:"/news",variant:"contained"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))))}}]),a}(d.PureComponent),Ct=Object(fe.a)(Object(Qe.a)((function(e){return{formCard:{padding:e.spacing(2)},textField:{display:"block",width:"100%"}}})),v.g,Object(j.b)((function(e){return{isLoading:Ke(e),newsList:et(e)}}),null))(St),kt=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props.classes;return p.a.createElement("div",{className:e.wrapper},p.a.createElement(Ee.a,null,p.a.createElement(ke.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"),p.a.createElement(v.b,{path:"/news",exact:!0,component:wt}),p.a.createElement(v.b,{path:"/news/add",component:Ct}),p.a.createElement(v.b,{path:"/news/:id/edit",component:Ct})))}}]),a}(d.PureComponent),Tt=Object(Qe.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"}}}))(kt),At=a(190),Pt=a.n(At),It=null,_t=function(e){return e.chat.users},Rt=function(e){return e.chat.messages},Dt=function(e){return e.chat.selectedRoom},Lt=function(e){return e.chat.messageText},Ut=Object(y.a)("".concat("CHAT","/SET_USERS")),Ft=Object(y.a)("".concat("CHAT","/ADD_USER")),Ht=Object(y.a)("".concat("CHAT","/UPDATE_USER")),Wt=Object(y.a)("".concat("CHAT","/REMOVE_USER")),Mt=Object(y.a)("".concat("CHAT","/ADD_MESSAGE")),Bt=Object(y.a)("".concat("CHAT","/SET_ROOM_HISTORY")),Gt=Object(y.a)("".concat("CHAT","/SET_TO_ZERO_MESSAGES")),zt=Object(y.a)("".concat("CHAT","/SET_SELECTED_ROOM")),qt=Object(y.a)("".concat("CHAT","/SET_MESSAGE_TEXT")),Vt=Object(y.a)("".concat("CHAT","/RESET_MESSAGE")),Xt=Object(S.a)((s={},Object(x.a)(s,Ut,(function(e,t){return t.payload})),Object(x.a)(s,Ft,(function(e,t){return[t.payload].concat(Object(A.a)(e))})),Object(x.a)(s,Ht,(function(e,t){return e.map((function(e){return e.userId===t.payload.userId?t.payload:e}))})),Object(x.a)(s,Wt,(function(e,t){return e.filter((function(e){return e.socketId!==t.payload}))})),s),[]),Jt=Object(S.a)((l={},Object(x.a)(l,Mt,(function(e,t){return[].concat(Object(A.a)(e),[t.payload])})),Object(x.a)(l,Bt,(function(e,t){return t.payload})),Object(x.a)(l,Gt,(function(){return[]})),l),[]),Zt=Object(S.a)(Object(x.a)({},zt,(function(e,t){return t.payload})),null),Qt=Object(S.a)((u={},Object(x.a)(u,qt,(function(e,t){return t.payload})),Object(x.a)(u,Vt,(function(){return""})),u),""),Yt=Object(C.c)({users:Xt,messages:Jt,selectedRoom:Zt,messageText:Qt}),Kt=function(){return function(e,t){var a=t(),n=B(a),r=Dt(a),c=Lt(a);It.emit("message:add",{senderId:n.id,recipientId:r.recipientId,roomId:r.socketId,text:c}),e(Vt())}},$t=a(406),ea=a(404),ta=a(360),aa=a(407),na=Object(fe.a)(Object(Qe.a)((function(e){return{column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"}}})),Object(j.b)((function(e){return{users:_t(e),selectedRoom:Dt(e)}})))((function(e){var t=e.classes,a=e.users,n=e.selectedRoom,r=e.dispatch,c=function(e){r(function(e){var t=e.userId,a=e.socketId;return function(e,n){var r=B(n());e(Gt()),e(zt({recipientId:t,socketId:a})),It.emit("message:history",{recipientId:t,userId:r.id})}}({userId:e.userId,socketId:e.socketId}))};return p.a.createElement(Pe.a,{className:t.column,square:!0},p.a.createElement(ft.a,{title:p.a.createElement(ke.a,{variant:"h5"},"\u041b\u0438\u0447\u043d\u044b\u0435 \u0447\u0430\u0442\u044b")}),p.a.createElement($t.a,null),p.a.createElement(ea.a,null,a.map((function(e,t){return p.a.createElement(ta.a,{button:!0,key:e.userId,selected:e.userId===n&&n.userId,onClick:function(){return c(e)}},p.a.createElement(aa.a,{primary:e.username}))}))))})),ra=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){(0,e.props.dispatch)(qt(t.target.value))},e.handleSubmit=function(t){t.preventDefault(),(0,e.props.dispatch)(Kt())},e}return Object(g.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.messages,n=e.messageText,r=e.userId,c=e.permission,i=!!ye()(c,"chat.C",!1);return p.a.createElement(p.a.Fragment,null,p.a.createElement(bt.a,{className:t.chatArea},p.a.createElement(Nt.a,{container:!0,direction:"column",wrap:"nowrap"},a.map((function(e,a){return p.a.createElement(Nt.a,{item:!0,key:a,className:Ge()(t.messageContainer,e.senderId!==r?t.isMyMessage:t.isAnotherMessage)},p.a.createElement(pt.a,{className:Ge()(t.message,e.senderId!==r?t.messagePrimary:t.messageSecondary)},e.text))})))),i&&p.a.createElement(gt.a,null,p.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},p.a.createElement(xt.a,{label:"Label",style:{margin:8},fullWidth:!0,margin:"normal",variant:"filled",InputLabelProps:{shrink:!0},value:n,onChange:this.handleChange}),p.a.createElement(je.a,{variant:"contained",color:"primary",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))))}}]),a}(d.PureComponent),ca=Object(fe.a)(Object(Qe.a)((function(e){return{messageContainer:{marginBottom:e.spacing(2)},message:{padding:e.spacing(1)},messagePrimary:{backgroundColor:e.palette.grey.A700},messageSecondary:{backgroundColor:e.palette.secondary.main},isMyMessage:{alignSelf:"end"},isAnotherMessage:{alignSelf:"flex-end"},chatArea:{height:"100%",overflowY:"scroll"},form:{display:"flex",alignItems:"center",width:"100%"}}})),Object(j.b)((function(e){return{messageText:Lt(e),userId:B(e).id,permission:G(e)}})))(ra),ia=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)((function(e,t){var a=B(t());(It=Pt()("https://loft-app.herokuapp.com/")).emit("users:connect",{userId:a.id,username:a.username}),It.on("users:list",(function(t){return e(Ut(t))})).on("users:add",(function(t){return e(Ft(t))})).on("users:leave",(function(a){e(Wt(a));var n=Dt(t());n&&n.socketId===a&&e(zt(null))})).on("message:history",(function(t){return e(Bt(t))})).on("message:add",(function(t){return e(Mt(t))}))}))}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)((function(e){It&&It.disconnect(),e(Ut([])),e(Gt()),e(zt(null)),e(Vt())}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=e.messages,r=e.selectedRoom;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(Ee.a,null,p.a.createElement(Nt.a,{container:!0,spacing:1},p.a.createElement(Nt.a,{item:!0,xs:4},p.a.createElement(na,{users:a,selected:r})),p.a.createElement(Nt.a,{item:!0,xs:8},p.a.createElement(pt.a,{className:t.column,square:!0},r?p.a.createElement(ca,{messages:n}):p.a.createElement("div",{className:t.empty},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0430\u0442"))))))}}]),a}(d.PureComponent),oa=Object(fe.a)(Object(Qe.a)((function(e){return{toolbar:e.mixins.toolbar,column:{height:"calc(100vh - 80px)",display:"flex",flexDirection:"column"},wrapper:{width:"100%",flex:"1 1 100%",paddingTop:e.spacing(1)},empty:{padding:e.spacing(3)}}})),Object(j.b)((function(e){return{users:_t(e),selectedRoom:Dt(e),messages:Rt(e)}})))(ia),sa=a(191),la=a.n(sa),ua=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",middleName:"",surName:"",oldPassword:"",newPassword:"",confirmPassword:"",image:"",fileRef:p.a.createRef()},e.cancelHandler=function(){var t=e.props.userProfile;e.setState({firstName:t.firstName,middleName:t.middleName,surName:t.surName,oldPassword:"",newPassword:"",confirmPassword:"",image:t.image})},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(x.a)({},n,r))},e.handleChangeFile=function(){var t=e.state.fileRef,a=new FileReader;a.onload=function(t){e.setState({image:t.target.result})},t.current.files[0]&&a.readAsDataURL(t.current.files[0])},e.submitHandler=function(){var t=e.props.dispatch,a=e.state,n=a.firstName,r=a.surName,c=a.middleName,i=a.oldPassword,o=a.newPassword,s=a.fileRef;t(ie({firstName:n,surName:r,middleName:c,oldPassword:i,newPassword:o,avatar:s.current.files[0]||null})).then((function(){e.cancelHandler()}))},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.userProfile;this.setState({firstName:e.firstName,middleName:e.middleName,surName:e.surName,image:e.image})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isLoading,n=this.state,r=n.firstName,c=n.surName,i=n.middleName,o=n.oldPassword,s=n.newPassword,l=n.confirmPassword,u=n.image,m=n.fileRef;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(Ee.a,null,p.a.createElement(Pe.a,{className:t.formCard},p.a.createElement(Nt.a,{container:!0,spacing:2},p.a.createElement(Nt.a,{item:!0,xs:4},p.a.createElement(la.a,{className:t.avatarPreviewWrapper},p.a.createElement(ht.a,{className:t.avatarPreview,src:u||"/assets/img/no-user-image-big.png"})),p.a.createElement(je.a,{className:t.uploadButton,variant:"contained",component:"label",color:"primary"},"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b",p.a.createElement("input",{type:"file",style:{display:"none"},ref:m,onChange:this.handleChangeFile}))),p.a.createElement(Nt.a,{item:!0,xs:8},p.a.createElement(Nt.a,{container:!0,direction:"column",style:{height:"100%"}},p.a.createElement(ke.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),p.a.createElement("div",{className:t.form},p.a.createElement(xt.a,{label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",className:t.textField,margin:"normal",name:"surName",value:c,onChange:this.handleChange}),p.a.createElement(xt.a,{label:"\u0418\u043c\u044f",className:t.textField,margin:"normal",name:"firstName",value:r,onChange:this.handleChange}),p.a.createElement(xt.a,{label:"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e",className:t.textField,margin:"normal",name:"middleName",value:i,onChange:this.handleChange})),p.a.createElement(ke.a,{variant:"h4",component:"h2",gutterBottom:!0},"\u041f\u0430\u0440\u043e\u043b\u044c"),p.a.createElement("div",{className:t.form},p.a.createElement(ze,{label:"\u0421\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"oldPassword",value:o,handleChange:this.handleChange}),p.a.createElement(ze,{label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",className:t.textField,name:"newPassword",value:s,handleChange:this.handleChange}),p.a.createElement(ze,{label:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",className:t.textField,name:"confirmPassword",value:l,handleChange:this.handleChange})),p.a.createElement(gt.a,{className:t.formActions},p.a.createElement(je.a,{color:"primary",variant:"contained",disabled:a,onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(je.a,{variant:"outlined",onClick:this.cancelHandler,disabled:a},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"))))))))}}]),a}(d.PureComponent),ma=Object(fe.a)(Object(Qe.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},avatarPreview:{width:"100%",height:"100%",borderRadius:"8px"},avatarPreviewWrapper:{marginBottom:e.spacing(2),width:"100%"},uploadButton:{display:"block",textAlign:"center"},form:{display:"flex",flexWrap:"wrap",marginBottom:e.spacing(3)},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},formActions:{marginTop:"auto",padding:0}}})),Object(j.b)((function(e){return{userProfile:B(e),isLoading:V(e)}})))(ua),da=a(131),pa=a.n(da),fa=function(e){return e.adminPanel.isLoadingUsers},ha=function(e){return e.adminPanel.users},ba=Object(y.a)("".concat("ADMIN_PANEL","/SET_IS_LOADING_USERS")),ga=Object(y.a)("".concat("ADMIN_PANEL","/SET_IS_LOADING_FORM")),Ea=Object(y.a)("".concat("ADMIN_PANEL","/SET_USERS")),Oa=Object(y.a)("".concat("ADMIN_PANEL","/SET_TO_ZERO_USERS")),va=Object(S.a)(Object(x.a)({},ba,(function(e,t){return t.payload})),!1),ja=Object(S.a)(Object(x.a)({},ga,(function(e,t){return t.payload})),!1),wa=Object(S.a)((m={},Object(x.a)(m,Ea,(function(e,t){return t.payload})),Object(x.a)(m,Oa,(function(){return[]})),m),[]),Na=Object(C.c)({isLoadingUsers:va,isLoadingForm:ja,users:wa}),xa=function(){return function(e,t){e(ba(!0)),M({url:"/users",getState:t,dispatch:e}).then((function(t){e(Ea(t))})).catch((function(e){return _({text:e.message,variant:"error"})})).finally((function(){return e(ba(!1))}))}},ya=function(e,t){return function(a,n){return new Promise((function(r){a(ga(!0)),M({url:"/users/".concat(e,"/permission"),method:"PATCH",data:{permission:t},getState:n,dispatch:a}).then((function(){_({text:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!",variant:"success"}),a(xa()),ye()(B(n()),"id",null)===e&&a(ne()),r(!0)})).catch((function(e){_({text:e.message,variant:"error"})})).finally((function(){return a(ga(!1))}))}))}},Sa=function(e){return function(t,a){return new Promise((function(n){t(ga(!0)),M({url:"/users/".concat(e),method:"DELETE",getState:a,dispatch:t}).then((function(e){t(xa()),n(!0)})).catch((function(e){_({text:e.message,variant:"error"})})).finally((function(){return t(ga(!1))}))}))}},Ca=a(416),ka=a(410),Ta=a(408),Aa=a(409),Pa=a(420),Ia=function(e){var t=e.handleChange,a=e.values,n=e.label;return p.a.createElement(p.a.Fragment,null,p.a.createElement(ke.a,{variant:"h5",component:"h3",gutterBottom:!0},n),p.a.createElement(Ta.a,null,p.a.createElement(Aa.a,{control:p.a.createElement(Pa.a,{checked:a.C,value:"create",onChange:t("C")}),label:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435"}),p.a.createElement(Aa.a,{control:p.a.createElement(Pa.a,{checked:a.R,value:"read",onChange:t("R")}),label:"\u0427\u0442\u0435\u043d\u0438\u0435"}),p.a.createElement(Aa.a,{control:p.a.createElement(Pa.a,{checked:a.U,value:"update",onChange:t("U")}),label:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"}),p.a.createElement(Aa.a,{control:p.a.createElement(Pa.a,{checked:a.D,value:"delete",onChange:t("D")}),label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"})))},_a={selectedUserId:"",selectedUser:null,permission:{chat:{C:!0,R:!0,U:!1,D:!1},news:{C:!0,R:!0,U:!1,D:!1},settings:{C:!0,R:!0,U:!1,D:!1}}},Ra=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(b.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=_a,e.handleChange=function(t){return function(a){return function(n){var r=n.target.checked,c=e.state.permission;e.setState({permission:Object(Te.a)(Object(Te.a)({},c),{},Object(x.a)({},t,Object(Te.a)(Object(Te.a)({},c[t]),{},Object(x.a)({},a,r))))})}}},e.handleChangeUser=function(t){var a=e.props.users,n=t.target.value,r=n?pa()(a.find((function(e){return e.id===n}))):null;e.setState({selectedUserId:n,selectedUser:r,permission:r.permission})},e.submitHandler=function(){var t=e.state,a=t.permission,n=t.selectedUserId;(0,e.props.dispatch)(ya(n,a))},e.cancelHandler=function(){var t=e.props.users,a=e.state.selectedUserId,n=pa()(t.find((function(e){return e.id===a})));a&&e.setState({selectedUser:n,permission:n.permission})},e.deleteHandler=function(){var t=e.state.selectedUserId,a=e.props.dispatch;t&&a(Sa(t)).then((function(){return e.setState(_a)}))},e}return Object(g.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(xa())}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.users,n=this.state,r=n.selectedUserId,c=n.selectedUser;return p.a.createElement("div",{className:t.wrapper},p.a.createElement(Ee.a,null,p.a.createElement(Pe.a,{className:t.formCard},p.a.createElement(Nt.a,{container:!0,wrap:"nowrap",alignItems:"center",className:t.mb3},p.a.createElement(ht.a,{src:c&&c.image||"/assets/img/no-user-image.png",className:t.userAvatar}),p.a.createElement(Ie.a,{className:t.userSelect},p.a.createElement(_e.a,{htmlFor:"age-simple"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),p.a.createElement(Ca.a,{value:r,onChange:this.handleChangeUser},p.a.createElement(ka.a,{value:null},"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),a.map((function(e){return p.a.createElement(ka.a,{value:e.id,key:e.id},e.username)}))))),c&&this.renderForms())))}},{key:"renderForms",value:function(){var e=this.props.classes,t=this.state.permission;return p.a.createElement(p.a.Fragment,null,p.a.createElement(Nt.a,{container:!0,spacing:2,className:e.mb3},p.a.createElement(Nt.a,{item:!0,xs:4},p.a.createElement(Ia,{label:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b",values:t.settings,handleChange:this.handleChange("settings")})),p.a.createElement(Nt.a,{item:!0,xs:4},p.a.createElement(Ia,{label:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",values:t.news,handleChange:this.handleChange("news")})),p.a.createElement(Nt.a,{item:!0,xs:4},p.a.createElement(Ia,{label:"\u0427\u0430\u0442",values:t.chat,handleChange:this.handleChange("chat")}))),p.a.createElement(Nt.a,{container:!0,spacing:2,justify:"center",alignItems:"center"},p.a.createElement(yt.a,null,p.a.createElement(je.a,{variant:"contained",color:"secondary",onClick:this.submitHandler},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),p.a.createElement(je.a,{variant:"contained",onClick:this.cancelHandler},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),p.a.createElement(je.a,{variant:"contained",onClick:this.deleteHandler},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))}}]),a}(d.PureComponent),Da=Object(fe.a)(Object(Qe.a)((function(e){return{wrapper:{width:"100%",flex:"1 1 100%",paddingTop:"40px"},formCard:{padding:e.spacing(2)},userSelect:{width:"100%"},userAvatar:{marginRight:e.spacing(2)},mb3:{marginBottom:e.spacing(3)}}})),Object(j.b)((function(e){return{isLoading:fa(e),users:ha(e)}})))(Ra),La=a(133),Ua=a(3),Fa=a(192),Ha=a.n(Fa),Wa=a(194),Ma=a.n(Wa),Ba=a(195),Ga=a.n(Ba),za=a(196),qa=a.n(za),Va=a(106),Xa=a(412),Ja=a(426),Za=a(413),Qa=a(193),Ya=a.n(Qa),Ka=a(411),$a={success:Ha.a,warning:Ya.a,error:Ma.a,info:Ga.a},en=Object(Ka.a)((function(e){return{success:{backgroundColor:Va.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:Xa.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function tn(e){var t=en(),a=e.className,n=e.message,r=e.onClose,c=e.variant,i=Object(La.a)(e,["className","message","onClose","variant"]),o=$a[c];return p.a.createElement(Za.a,Object.assign({className:Object(Ua.a)(t[c],a),"aria-describedby":"client-snackbar",message:p.a.createElement("span",{id:"client-snackbar",className:t.message},p.a.createElement(o,{className:Object(Ua.a)(t.icon,t.iconVariant)}),n),action:[p.a.createElement(Fe.a,{key:"close","aria-label":"close",color:"inherit",onClick:r},p.a.createElement(qa.a,{className:t.icon}))]},i))}var an=function(e){var t={openNotification:_,closeNotification:R};return Object(j.b)((function(e){return{notifications:D(e)}}),t)((function(t){var a=t.openNotification,n=t.closeNotification,r=t.notifications,c=Object(La.a)(t,["openNotification","closeNotification","notifications"]),i=function(e){return function(t,a){"clickaway"!==a&&n(e)}},o=r.find((function(e){return!!e.isActive}));return p.a.createElement(p.a.Fragment,null,p.a.createElement(e,Object.assign({},c,{openNotification:a})),o&&p.a.createElement(Ja.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:!0,autoHideDuration:2500,onClose:i(o.id)},p.a.createElement(tn,{onClose:i(o.id),variant:o.variant,message:o.text})))}))},nn=function(){return{root:{display:"flex",flexDirection:"column",height:"100%",minHeight:"100vh",backgroundColor:"#f5f5f5"},container:{flex:"1 1 100%",display:"flex",flexDirection:"column"},mainLayoutWrapper:{background:'url("/assets/img/another-background.png") no-repeat',backgroundPosition:"center center",backgroundSize:"cover",width:"100%",flex:"1 1 100%",display:"flex",alignItems:"stretch"}}},rn=Object(he.a)(nn)((function(e){var t=e.children,a=e.classes;return p.a.createElement("div",{className:a.mainLayoutWrapper},t)})),cn=function(e){return an(function(e){return function(t){return p.a.createElement(rn,null,p.a.createElement(e,t))}}(e))},on=function(e){Object(E.a)(a,e);var t=Object(O.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(ne())}},{key:"render",value:function(){var e=this.props.classes;return p.a.createElement("div",{className:e.root},p.a.createElement(Ce,null),p.a.createElement(be.a,{className:e.container},p.a.createElement(v.d,null,p.a.createElement(v.b,{path:oe,exact:!0,component:an(Ze)}),p.a.createElement(v.b,{path:se,component:an(Ze)}),p.a.createElement(pe,{permissionPath:"news",path:le,component:cn(Tt)}),p.a.createElement(pe,{permissionPath:"chat",path:ue,component:cn(oa)}),p.a.createElement(pe,{path:me,component:cn(ma)}),p.a.createElement(pe,{permissionPath:"settings",path:de,component:cn(Da)}))))}}]),a}(d.PureComponent),sn=Object(fe.a)(Object(he.a)(nn),Object(j.b)())(on),ln=a(415),un=a(414),mn=a(105),dn=a(198),pn=Object(dn.a)({palette:{primary:{main:"#63c1a0"},secondary:{main:"#19857b"},error:{main:mn.a.A400},background:{default:"rgba(255, 255, 255, .87)"}}}),fn=a(197),hn=Object(C.c)({auth:ae,notifications:U,news:ut,adminPanel:Na,chat:Yt}),bn=function(){return Object(C.e)(hn,Object(C.d)(Object(C.a)(fn.a),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}))};h.a.render(p.a.createElement(un.a,{theme:pn},p.a.createElement(ln.a,null),p.a.createElement(j.a,{store:bn()},p.a.createElement(ve.a,null,p.a.createElement(sn,null)))),document.getElementById("root"))}},[[213,1,2]]]);
//# sourceMappingURL=main.f572aceb.chunk.js.map